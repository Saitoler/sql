## 总纲

数据库索引是数据库管理系统的一种用于加快查询效率的数据结构。  
数据库索引能够提高查询效率，但对于数据库表的增、删、改效率有所降低。

## 数据库索引分类

数据库索引按不同围堵，分为不同的类型，如下所示：  
总结：  
- 按数据库中表记录的物理存储方式分为： 聚集索引、非聚集索引；区分方法是判断表记录的排列顺序是否与索引的排列顺序一致，一致则是聚集索引，反之则为非聚集索引  
- 按逻辑角度分为：
> - 唯一索引
> - 主键索引
> - 普通索引
> - 复合索引   
注：主键索引是唯一索引的一种，二者的区别是， 唯一索引仅要求索引列数据是唯一的，而主键索引则  要求索引列数据不仅是唯一的，而且不为空。 

![](https://github.com/Saitoler/sql/blob/master/pics/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95%E5%88%86%E7%B1%BB.png)

## 创建索引 
```sql
CREATE TABLE `student` (
  `Id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '自增Id',
  `Gid` int(11) unsigned DEFAULT NULL COMMENT '年级id',
  `Cid` int(11) unsigned DEFAULT NULL COMMENT '班级id',
  `SId` int(11) unsigned DEFAULT NULL COMMENT '学号',
  `Name` varchar(10) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '姓名',
  PRIMARY KEY (`Id`) -- 声明主键
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- 插入数据
INSERT INTO `student` (`Gid`, `Cid`, `SId`, `Name`) VALUES (floor(rand() * rand() *rand() * 1000000000) , floor(rand() *  rand() *rand() * 1000000000) , floor(rand() * rand() * rand() *1000000000) , rand());

-- 为 Gid, Cid, Sid 三列创建复合索引
create unique index uni_gid_cid_sid on student(Gid, Cid, Sid);
```
> 注： 上述代码实际上是创建了（Gid）、(Gid, Cid)、(Gid, Cid, Sid) 三个索引

## 查询所创建索引
```sql
-- 会展示表上所有的索引数据

show index from student;
```
![展示表上所有索引](https://github.com/Saitoler/sql/blob/master/pics/%E5%B1%95%E7%A4%BA%E7%B4%A2%E5%BC%95.png)

### 查询示例
```sql
SELECT * FROM student WHERE Gid=68778 AND Cid=465176354 AND Name='0.56437948'
```
如下，可以确定，此查询因为遵循最左匹配原则，查询时匹配了索引(Gid, Cid) 进行数据匹配
![]()

